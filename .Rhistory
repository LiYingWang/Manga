df_manga_t100_tags %>%
mutate(rank = as.numeric(rank)) %>%
mutate(rank_2groups = ifelse(rank == c(1:2), "1-50", "51-100"))
View(manga_t100_tags_groups)
#----------------------patterns of tags------------------
# tidy the data to have to rank groups for comparison
#library(scales)
manga_t100_tags_groups <-
df_manga_t100_tags %>%
mutate(rank = as.numeric(rank)) %>%
mutate(rank_2groups = ifelse(rank == c(1:3), "1-50", "51-100"))
View(manga_t100_tags_groups)
#----------------------patterns of tags------------------
# tidy the data to have to rank groups for comparison
#library(scales)
manga_t100_tags_groups <-
df_manga_t100_tags %>%
mutate(rank = as.numeric(rank)) %>%
mutate(rank_2groups = ifelse(rank < 51, "1-50", "51-100"))
View(manga_t100_tags_groups)
#----------------------patterns of tags------------------
# tidy the data to have to rank groups for comparison
#library(scales)
manga_t100_tags_groups <-
df_manga_t100_tags %>%
mutate(rank = as.numeric(rank), year = as.numeric(year)) %>%
mutate(rank_2groups = ifelse(rank < 51, "1-50", "51-100"),
year_2groups = ifelse(year < 2010, "before 2010", "after 2010"))
View(df_manga_t100_tags)
# plot
fre_rank_groups <-
df_manga_t100_tags%>%
count(rank_2groups, text)
# plot
fre_rank_groups <-
manga_t100_tags_groups%>%
count(rank_2groups, text)
View(fre_rank_groups)
# plot
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n)
View(fre_rank_groups)
sum(fre_rank_groups$proportion)
# plot
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion) %>%
gather(author, proportion, `BrontÃ« Sisters`:`H.G. Wells`)
# plot
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion)
View(fre_rank_groups)
# plot
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n)
View(fre_rank_groups)
# plot
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n))
View(fre_rank_groups)
# plot
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion)
View(fre_rank_groups)
# plot
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion) %>%
gather(rank_2groups, proportion, `Top 1-50`:`Top 51-100`)
# plot
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion) %>%
gather(rank_2groups, proportion, `1-50`:`51-100`)
View(fre_rank_groups)
# plot
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n))
View(fre_rank_groups)
sum(fre_rank_groups$proportion)
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n))
ggplot(fre_rank_groups, aes(x = proportion, y = `1-50`, color = abs(`1-50` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.1, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = word), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.001), low = "darkslategray4", high = "gray75") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(y = "1:50", x = NULL)
#----------------------patterns of tags------------------
library(scales)
ggplot(fre_rank_groups, aes(x = proportion, y = `1-50`, color = abs(`1-50` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.1, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = word), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.001), low = "darkslategray4", high = "gray75") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(y = "1:50", x = NULL)
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion) %>%
gather(rank_2groups, proportion, `1-50`:`51-100`)
View(fre_rank_groups)
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n))
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n))
View(fre_rank_groups)
# tidy the data to have to rank groups for comparison
manga_t100_tags_groups <-
df_manga_t100_tags %>%
mutate(rank = as.numeric(rank), year = as.numeric(year)) %>%
mutate(rank_2groups = ifelse(rank < 51, "1-50", "51-100"),
year_2groups = ifelse(year < 2010, "before 2010", "after 2010"))
ggplot(manga_t100_tags_groups,
aes(year, rank)) +
geom_point() +
geom_text_repel(aes(label = text,
color = rank_groups)) +
theme_minimal() +
theme(legend.position = "none",
plot.title = element_text(hjust = 0.5)) +
ggtitle("manga") +
scale_y_reverse(limits = c(100, 1),
breaks = c(seq(100,1,by = -10), 1))
ggplot(manga_t100_tags_groups,
aes(year, rank)) +
geom_point() +
geom_text_repel(aes(label = text,
color = rank_2groups)) +
theme_minimal() +
theme(legend.position = "none",
plot.title = element_text(hjust = 0.5)) +
ggtitle("manga") +
scale_y_reverse(limits = c(100, 1),
breaks = c(seq(100,1,by = -10), 1))
ggplot(manga_t100_tags_groups,
aes(year, rank)) +
geom_point() +
geom_text_repel(aes(label = text,
color = title)) +
theme_minimal() +
theme(legend.position = "none",
plot.title = element_text(hjust = 0.5)) +
ggtitle("manga") +
scale_y_reverse(limits = c(100, 1),
breaks = c(seq(100,1,by = -10), 1)) +
facet_wrap(rank_2groups)
ggplot(manga_t100_tags_groups,
aes(year, rank)) +
geom_point() +
geom_text_repel(aes(label = text,
color = title)) +
theme_minimal() +
theme(legend.position = "none",
plot.title = element_text(hjust = 0.5)) +
ggtitle("manga") +
scale_y_reverse(limits = c(100, 1),
breaks = c(seq(100,1,by = -10), 1)) +
facet_wrap(~rank_2groups)
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion) %>%
gather(rank_2groups, proportion)
View(fre_rank_groups)
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion)
View(fre_rank_groups)
sum(fre_rank_groups$1-50)
sum(fre_rank_groups$"1-50")
sum(fre_rank_groups$1-50)
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion) %>%
gather(author, proportion, `1:50`)
View(fre_rank_groups)
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion) %>%
gather(rank_2groups, proportion, `1:50`)
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion) %>%
gather(rank_2groups, proportion, `1:50`)
View(fre_rank_groups)
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion) %>%
gather(rank_2groups, proportion, `1-50`)
View(fre_rank_groups)
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.1, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = word), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.001), low = "darkslategray4", high = "gray75") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(y = "51-100", x = NULL)
#----------------------patterns of tags------------------
library(scales)
# tidy the data to have to rank groups for comparison
manga_t100_tags_groups <-
df_manga_t100_tags %>%
mutate(rank = as.numeric(rank), year = as.numeric(year)) %>%
mutate(rank_2groups = ifelse(rank < 51, "1-50", "51-100"),
year_2groups = ifelse(year < 2010, "before 2010", "after 2010"))
# plot the
fre_rank_groups <-
manga_t100_tags_groups %>%
count(rank_2groups, text) %>%
group_by(rank_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(rank_2groups, proportion) %>%
gather(rank_2groups, proportion, `1-50`)
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.1, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.001), low = "darkslategray4", high = "gray75") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(y = "51-100", x = NULL)
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.001), low = "darkslategray4", high = "gray75") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(y = "51-100", x = NULL)
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.001), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(y = "51-100", x = NULL)
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.01), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(x = "Top 1-50", y = "Top 51-100")
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.001), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(x = "Top 1-50", y = "Top 51-100")
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.005), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(x = "Top 1-50", y = "Top 51-100")
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.01), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(x = "Top 1-50", y = "Top 51-100")
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.001), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(x = "Top 1-50", y = "Top 51-100")
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
#scale_x_log10(labels = percent_format()) +
#scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.001), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(x = "Top 1-50", y = "Top 51-100")
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.001), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(x = "Top 1-50", y = "Top 51-100")
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.01), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(x = "Top 1-50", y = "Top 51-100")
# plot the comparision of genre frequency of manga for different time periods
fre_year_groups <-
manga_t100_tags_groups %>%
count(year_2groups, text) %>%
group_by(year_2groups) %>%
mutate(proportion = n / sum(n)) %>%
select(-n) %>%
spread(year_2groups, proportion) %>%
gather(year_2groups, proportion, `after 2010`)
ggplot(fre_rank_groups,
aes(x = proportion, y = `before 2010`, color = abs(`before 2010` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.01), low = "darkslategray4", high = "red") +
facet_wrap(~year_2groups) +
theme(legend.position="none") +
labs(x = "before 2010", y = "after 2010")
ggplot(fre_year_groups,
aes(x = proportion, y = `before 2010`, color = abs(`before 2010` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.01), low = "darkslategray4", high = "red") +
facet_wrap(~year_2groups) +
theme(legend.position="none") +
labs(x = "before 2010", y = "after 2010")
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.01), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(y = "Top 51-100")
ggplot(fre_rank_groups,
aes(x = proportion, y = `51-100`, color = abs(`51-100` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.01), low = "darkslategray4", high = "red") +
facet_wrap(~rank_2groups) +
theme(legend.position="none") +
labs(y = "Top 51-100", x = NULL)
ggplot(fre_year_groups,
aes(x = proportion, y = `before 2010`, color = abs(`before 2010` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
scale_x_log10(labels = percent_format()) +
scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.01), low = "darkslategray4", high = "red") +
facet_wrap(~year_2groups) +
theme(legend.position="none") +
labs(y = "before 2010", x = NULL)
ggplot(fre_year_groups,
aes(x = proportion, y = `before 2010`, color = abs(`before 2010` - proportion))) +
geom_abline(color = "gray40", lty = 2) +
geom_jitter(alpha = 0.5, size = 2.5, width = 0.3, height = 0.3) +
geom_text(aes(label = text), check_overlap = TRUE, vjust = 1.5) +
#scale_x_log10(labels = percent_format()) +
#scale_y_log10(labels = percent_format()) +
scale_color_gradient(limits = c(0, 0.01), low = "darkslategray4", high = "red") +
facet_wrap(~year_2groups) +
theme(legend.position="none") +
labs(y = "before 2010", x = NULL)
# install.packages("devtools")
devtools::install_github("benmarwick/rrtools")
library(rrtools) # will confirm that you have Git installed and configured
create_compendium("pkgname")
# install.packages("devtools")
devtools::install_github("benmarwick/rrtools")
library(rrtools) # will confirm that you have Git installed and configured
create_compendium("pkgname")
